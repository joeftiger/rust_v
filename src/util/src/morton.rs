#[inline]
fn left_shift_3(mut x: u32) -> u32 {
    debug_assert!(x <= (1 << 10));

    if x == (1 << 10) {
        x -= 1;
    }

    x = (x | (x << 16)) & 0x30000ff; // x = ---- --98 ---- ---- ---- ---- 7654 3210
    x = (x | (x << 8)) & 0x300f00f; // x = ---- --98 ---- ---- 7654 ---- ---- 3210
    x = (x | (x << 4)) & 0x30c30c3; // x = ---- --98 ---- 76-- --54 ---- 32-- --10
    x = (x | (x << 2)) & 0x9249249; // x = ---- 9--8 --7- -6-- 5--4 --3- -2-- 1--0

    x
}

#[inline]
pub fn encode_morton_3(x: u32, y: u32, z: u32) -> u32 {
    left_shift_3(x) | (left_shift_3(y) << 1) | (left_shift_3(z) << 2)
}
